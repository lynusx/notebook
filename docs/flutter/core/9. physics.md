# physics -- 物理模拟

提供一维物理模拟（弹簧、摩擦、重力），用于创建自然流畅的动画效果，如滚动回弹、甩动停止等。

### 1.1 核心能力

- 模拟器（Simulation、ScrollSimulation、FrictionSimulation、SpringSimulation、ClampingScrollSimulation、BouncingScrollSimulation）
- 弹簧模型（SpringDescription、SpringType、CriticalDampedSpring/OverDampedSpring/UnderDampedSpring）
- 摩擦模型（FrictionSimulation、FrictionSpringSimulation）
- 物理utils（Tolerance、nearEqual、nearZero）

### 1.2 库结构

```dart
flutter/physics
│
├── 物理模拟基类
│   ├── Simulation                # 模拟器基类
│   ├── ScrollSimulation          # 滚动模拟器基类
│   ├── Tolerance                 # 容差 (距离/速度/时间)
│   ├── nearEqual()               # 近似相等判断
│   └── nearZero()                # 近似零判断
│
├── 弹簧模拟
│   ├── SpringSimulation          # 弹簧模拟器
│   ├── SpringDescription         # 弹簧描述 (质量/刚度/阻尼)
│   ├── SpringType                # 弹簧类型枚举
│   ├── SpringType.criticallyDamped  # 临界阻尼
│   ├── SpringType.overDamped     # 过阻尼
│   ├── SpringType.underDamped    # 欠阻尼
│   └── SpringDescription.withDampingRatio()  # 阻尼比构造
│
├── 摩擦模拟
│   ├── FrictionSimulation        # 摩擦模拟器 (指数减速)
│   ├── FrictionSimulation.through()  # 通过两点创建
│   ├── FrictionSimulation.drag()     # 计算摩擦系数
│   └── FrictionSpringSimulation  # 摩擦弹簧混合模拟
│
├── 滚动模拟
│   ├── ClampingScrollSimulation  # 钳制滚动模拟 (Android 风格)
│   ├── BouncingScrollSimulation  # 回弹滚动模拟 (iOS 风格)
│   ├── BallisticScrollActivity   # 弹道滚动活动
│   └── ScrollMetrics             # 滚动度量 (来自 rendering)
│
├── 重力模拟
│   ├── GravitySimulation         # 重力模拟器
│   ├── GravitySimulation.onSurface()  # 表面重力
│   └── GravitySimulation.thrown()     # 抛体运动
│
├── 物理行为
│   ├── ScrollPhysics             # 滚动物理行为基类
│   ├── ClampingScrollPhysics     # 钳制滚动物理
│   ├── BouncingScrollPhysics     # 回弹滚动物理
│   ├── AlwaysScrollableScrollPhysics  # 始终可滚动物理
│   ├── NeverScrollableScrollPhysics   # 不可滚动物理
│   ├── PageScrollPhysics         # 页面滚动物理
│   ├── RangeMaintainingScrollPhysics  # 范围保持物理
│   ├── FixedExtentScrollPhysics       # 固定范围物理
│   ├── ScrollPhysics.applyTo()        # 应用物理
│   └── ScrollPhysics.createBallisticSimulation()  # 创建弹道模拟
│
└── 工具与常量
    ├── RangeUtils                # 范围工具
    ├── RangeUtils.clamp()        # 钳制值
    ├── RangeUtils.nearEqual()    # 范围近似相等
    ├── Simulation.x()            # 获取位置
    ├── Simulation.dx()           # 获取速度
    ├── Simulation.isDone()       # 是否完成
    └── tolerance                 # 默认容差常量
```



---

