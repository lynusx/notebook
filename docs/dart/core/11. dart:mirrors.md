# dart:mirrors -- 反射库

提供基础反射能力，支持内省（introspection）和动态调用。**实验性功能**，仅在 Native JIT 模式下可用，Flutter AOT 编译不支持。

### 1.1 核心能力

- 镜像系统（MirrorSystem、reflect、reflectType）
- 实例镜像（InstanceMirror、ClassMirror、ObjectMirror）
- 声明镜像（MethodMirror、VariableMirror、ParameterMirror、TypeMirror、FunctionTypeMirror、TypedefMirror）
- 库与编译单元（LibraryMirror、LibraryDependencyMirror、CombinatorMirror）
- 注解访问（getMetadata）

### 1.2 库结构

```dart
dart:mirrors
│
├── 镜像系统入口
│   ├── MirrorSystem              # 镜像系统基类
│   ├── currentMirrorSystem()     # 获取当前隔离区的镜像系统
│   ├── reflect()                 # 反射对象获取 InstanceMirror
│   └── reflectType()             # 反射类型获取 TypeMirror/ClassMirror
│
├── 对象与实例
│   ├── InstanceMirror            # 实例镜像 (对象状态/方法调用)
│   ├── ClosureMirror             # 闭包镜像 (函数闭包反射)
│   ├── ObjectMirror              # 对象操作镜像基类
│   ├── delegate()                # 创建委托调用代理
│   ├── getField()                # 获取字段值
│   ├── setField()                # 设置字段值
│   ├── invoke()                  # 调用方法
│   └── newInstance()             # 创建新实例
│
├── 类与类型
│   ├── ClassMirror               # 类镜像 (成员/构造器/元数据)
│   ├── TypeMirror                # 类型镜像基类
│   ├── FunctionTypeMirror        # 函数类型镜像
│   ├── TypedefMirror             # 类型定义 (typedef) 镜像
│   ├── TypeVariableMirror        # 泛型类型变量镜像
│   ├── DeclarationMirror         # 声明镜像抽象基类
│   └── ClassMemberMirror         # 类成员镜像抽象基类
│
├── 成员与声明
│   ├── MethodMirror              # 方法/构造器/函数镜像
│   ├── VariableMirror            # 变量/字段镜像
│   ├── ParameterMirror           # 参数镜像
│   ├── LibraryMirror             # 库镜像 (导入/导出/成员)
│   ├── LibraryDependencyMirror   # 库依赖关系 (import/export)
│   ├── CombinatorMirror          # 组合器 (show/hide)
│   ├── SourceLocation            # 源代码位置信息
│   └── CommentMirror             # 文档注释镜像
│
├── 反射能力控制
│   ├── InstanceInvokeCapability  # 实例方法调用能力
│   ├── StaticInvokeCapability    # 静态方法调用能力
│   ├── NewInstanceCapability     # 构造器调用能力
│   ├── TypeCapability            # 类型反射能力
│   ├── MetadataCapability        # 元数据访问能力
│   ├── DeclarationsCapability    # 声明枚举能力
│   ├── NameCapability            # 名称访问能力
│   ├── UriCapability             # URI 访问能力
│   └── LibraryCapability         # 库信息访问能力
│
└── 异常
    ├── MirroredError             # 反射操作错误基类
    ├── MirrorException           # 镜像异常 (如不支持的操作)
    └── NoSuchCapabilityError     # 缺少反射能力错误
```



---

