# package:web -- Web API库

 `dart:html` 的现代化替代品，提供对浏览器 DOM 和 API 的访问。

### 1.1 核心能力

- DOM 元素操作（HTMLElement、Document、Window、Node、Element）
- 事件系统（Event、EventTarget、MouseEvent、KeyboardEvent）
- 网络请求（fetch、XMLHttpRequest、WebSocket）
- 存储 API（localStorage、sessionStorage、IndexedDB）
- 图形与媒体（CanvasRenderingContext2D、WebGL、AudioContext、VideoElement）
- Web 组件（CustomElement、ShadowRoot）

### 1.2 库结构

```dart
package:web
│
├── DOM 核心
│   ├── Window                    # 浏览器窗口 (全局对象)
│   ├── Document                  # HTML 文档根节点
│   ├── Node                      # DOM 节点基类
│   ├── Element                   # HTML 元素基类
│   ├── HTMLElement               # HTML 元素基类
│   ├── Text                      # 文本节点
│   ├── Comment                   # 注释节点
│   ├── DocumentFragment          # 轻量级文档片段
│   ├── ShadowRoot                # Shadow DOM 根节点
│   ├── DocumentType              # 文档类型声明
│   ├── CDATASection              # CDATA 节点
│   ├── ProcessingInstruction     # 处理指令节点
│   └── NodeList                  # 节点集合
│
├── HTML 元素
│   ├── HTMLDivElement            # <div>
│   ├── HTMLSpanElement           # <span>
│   ├── HTMLParagraphElement      # <p>
│   ├── HTMLHeadingElement        # <h1> - <h6>
│   ├── HTMLButtonElement         # <button>
│   ├── HTMLInputElement          # <input>
│   ├── HTMLFormElement           # <form>
│   ├── HTMLLabelElement          # <label>
│   ├── HTMLSelectElement         # <select>
│   ├── HTMLOptionElement         # <option>
│   ├── HTMLTextAreaElement       # <textarea>
│   ├── HTMLImageElement          # <img>
│   ├── HTMLVideoElement          # <video>
│   ├── HTMLAudioElement          # <audio>
│   ├── HTMLCanvasElement         # <canvas>
│   ├── HTMLScriptElement         # <script>
│   ├── HTMLStyleElement          # <style>
│   ├── HTMLLinkElement           # <link>
│   ├── HTMLAnchorElement         # <a>
│   ├── HTMLTableElement          # <table>
│   ├── HTMLTableRowElement       # <tr>
│   ├── HTMLTableCellElement      # <td>/<th>
│   ├── HTMLTableSectionElement   # <thead>/<tbody>/<tfoot>
│   ├── HTMLUListElement          # <ul>
│   ├── HTMLOListElement          # <ol>
│   ├── HTMLLIElement             # <li>
│   ├── HTMLIFrameElement         # <iframe>
│   ├── HTMLObjectElement         # <object>
│   ├── HTMLEmbedElement          # <embed>
│   ├── HTMLSourceElement         # <source>
│   ├── HTMLMetaElement           # <meta>
│   ├── HTMLTitleElement          # <title>
│   ├── HTMLHeadElement           # <head>
│   ├── HTMLBodyElement           # <body>
│   ├── HTMLHtmlElement           # <html>
│   ├── HTMLTemplateElement       # <template>
│   ├── HTMLSlotElement           # <slot>
│   └── HTMLElementTagNameMap     # 标签名到元素类型映射
│
├── CSS 与样式
│   ├── CSSStyleDeclaration       # 行内样式 (element.style)
│   ├── getComputedStyle()        # 获取计算样式
│   ├── CSSStyleSheet             # CSS 样式表
│   ├── CSSRule                   # CSS 规则基类
│   ├── CSSStyleRule              # 选择器 + 样式块
│   ├── CSSMediaRule              # @media 规则
│   ├── CSSKeyframesRule          # @keyframes 规则
│   ├── CSSKeyframeRule           # 关键帧规则
│   ├── CSSImportRule             # @import 规则
│   ├── CSSFontFaceRule           # @font-face 规则
│   ├── CSSPageRule               # @page 规则
│   ├── CSSNamespaceRule          # @namespace 规则
│   ├── CSSSupportsRule           # @supports 规则
│   ├── StyleSheetList            # 文档样式表集合
│   └── CSS                       # CSS 静态方法 (escape(), supports())
│
├── 事件系统
│   ├── Event                     # 事件基类
│   ├── EventTarget               # 事件目标基类
│   ├── EventListener             # 事件监听器回调类型
│   ├── MouseEvent                # 鼠标事件
│   ├── KeyboardEvent             # 键盘事件
│   ├── TouchEvent                # 触摸事件
│   ├── Touch                     # 触摸点
│   ├── TouchList                 # 触摸点集合
│   ├── FocusEvent                # 焦点事件
│   ├── InputEvent                # 输入事件
│   ├── CustomEvent               # 自定义事件
│   ├── WheelEvent                # 滚轮事件
│   ├── DragEvent                 # 拖拽事件
│   ├── ClipboardEvent            # 剪贴板事件
│   ├── ProgressEvent             # 进度事件
│   ├── ErrorEvent                # 错误事件
│   ├── HashChangeEvent           # URL hash 变化事件
│   ├── PopStateEvent             # 历史状态变化事件
│   ├── PageTransitionEvent       # 页面过渡事件
│   ├── addEventListener()        # 添加事件监听
│   ├── removeEventListener()     # 移除事件监听
│   └── dispatchEvent()           # 触发自定义事件
│
├── 网络与通信
│   ├── fetch()                   # Fetch API
│   ├── Request                   # HTTP 请求对象
│   ├── Response                  # HTTP 响应对象
│   ├── Headers                   # HTTP 头部
│   ├── FormData                  # 表单数据
│   ├── XMLHttpRequest            # XHR
│   ├── WebSocket                 # WebSocket 连接
│   ├── CloseEvent                # WebSocket 关闭事件
│   ├── MessageEvent              # 消息事件
│   ├── EventSource               # Server-Sent Events
│   ├── Worker                    # Web Worker
│   ├── SharedWorker              # 共享 Worker
│   ├── WorkerGlobalScope         # Worker 全局作用域
│   ├── DedicatedWorkerGlobalScope  # 专用 Worker 作用域
│   ├── ServiceWorkerContainer    # Service Worker 容器
│   ├── Cache                     # Cache API
│   ├── CacheStorage              # 缓存存储
│   └── navigator.sendBeacon()    # 信标发送
│
├── 存储
│   ├── localStorage              # 本地持久存储
│   ├── sessionStorage            # 会话级存储
│   ├── Storage                   # Storage 接口
│   ├── StorageEvent              # 存储变化事件
│   ├── IDBFactory                # IndexedDB 工厂
│   ├── IDBDatabase               # IndexedDB 数据库
│   ├── IDBObjectStore            # 对象存储
│   ├── IDBIndex                  # 索引
│   ├── IDBTransaction            # 事务
│   ├── IDBRequest                # 请求
│   ├── IDBCursor                 # 游标
│   ├── IDBKeyRange               # 键范围
│   └── CookieStore               # Cookie Store API
│
├── 图形与媒体
│   ├── CanvasRenderingContext2D  # 2D 渲染上下文
│   ├── CanvasGradient            # 渐变
│   ├── CanvasPattern             # 图案
│   ├── ImageData                 # 像素数据
│   ├── TextMetrics               # 文本测量
│   ├── Path2D                    # 2D 路径
│   ├── OffscreenCanvas           # 离屏画布
│   ├── WebGLRenderingContext     # WebGL 1.0 上下文
│   ├── WebGL2RenderingContext    # WebGL 2.0 上下文
│   ├── MediaStream               # 媒体流 (getUserMedia)
│   ├── MediaStreamTrack          # 媒体轨道
│   ├── MediaRecorder             # 媒体录制
│   ├── BlobEvent                 # 录制数据事件
│   ├── AudioContext              # Web Audio API
│   ├── AudioNode                 # 音频节点基类
│   ├── AudioDestinationNode      # 音频输出
│   ├── AudioBuffer               # 音频缓冲区
│   ├── AudioBufferSourceNode     # 音频源节点
│   ├── GainNode                  # 增益节点
│   ├── AnalyserNode              # 分析节点
│   ├── HTMLMediaElement          # 媒体元素基类
│   └── MediaError                # 媒体错误
│
├── 设备与传感器
│   ├── Geolocation               # 地理位置 API
│   ├── GeolocationPosition       # 位置信息
│   ├── GeolocationCoordinates    # 坐标信息
│   ├── DeviceOrientationEvent    # 设备方向事件
│   ├── DeviceMotionEvent         # 设备运动事件
│   ├── Accelerometer             # 加速度计
│   ├── Gyroscope                 # 陀螺仪
│   ├── Magnetometer              # 磁力计
│   ├── Navigator                 # 浏览器信息
│   ├── Screen                    # 屏幕信息
│   ├── ScreenOrientation         # 屏幕方向
│   ├── Notification              # 桌面通知
│   ├── NotificationEvent         # 通知事件
│   ├── Vibration                 # 振动 API
│   ├── BatteryManager            # 电池信息
│   ├── NetworkInformation        # 网络信息
│   └── Permissions               # 权限 API
│
└── 其他 Web API
    ├── History                   # 历史记录操作
    ├── Location                  # URL 信息
    ├── console                   # 控制台对象
    ├── console.log()             # 日志输出
    ├── console.error()           # 错误输出
    ├── console.warn()            # 警告输出
    ├── requestAnimationFrame()   # 动画帧回调
    ├── cancelAnimationFrame()    # 取消动画帧
    ├── requestIdleCallback()     # 空闲回调
    ├── cancelIdleCallback()      # 取消空闲回调
    ├── IntersectionObserver      # 交叉观察器
    ├── IntersectionObserverEntry # 观察条目
    ├── ResizeObserver            # 大小观察器
    ├── ResizeObserverEntry       # 大小观察条目
    ├── MutationObserver          # 变动观察器
    ├── MutationRecord            # 变动记录
    ├── DOMParser                 # DOM 解析器
    ├── XMLSerializer             # XML 序列化
    ├── URL                       # URL 解析
    ├── URLSearchParams           # URL 参数
    ├── Blob                      # 二进制大对象
    ├── File                      # 文件对象
    ├── FileReader                # 文件读取
    ├── FileList                  # 文件列表
    ├── URL.createObjectURL()     # 创建对象 URL
    ├── URL.revokeObjectURL()     # 释放对象 URL
    ├── Performance               # 性能 API
    ├── PerformanceEntry          # 性能条目
    ├── PerformanceObserver       # 性能观察器
    ├── Selection                 # 文本选择
    ├── Range                     # 文档范围
    ├── DOMRect                   # 矩形几何信息
    ├── DOMMatrix                 # 变换矩阵
    ├── AbortController           # 中止控制器
    ├── AbortSignal               # 中止信号
    └── CustomElementRegistry     # 自定义元素注册
```



---

