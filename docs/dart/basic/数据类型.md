# Dart è¯­è¨€æ•°æ®ç±»å‹è¯¦è§£

Dart æ˜¯ä¸€ç§ç”± Google å¼€å‘çš„ç°ä»£åŒ–ç¼–ç¨‹è¯­è¨€ï¼Œå¹¿æ³›åº”ç”¨äº Flutter ç§»åŠ¨åº”ç”¨å¼€å‘ã€Web åº”ç”¨ä»¥åŠæœåŠ¡å™¨ç«¯ç¨‹åºã€‚ä½œä¸º Flutter æ¡†æ¶çš„æ ¸å¿ƒç¼–ç¨‹è¯­è¨€ï¼ŒDart æ‹¥æœ‰ä¸°å¯Œè€Œå¼ºå¤§çš„ç±»å‹ç³»ç»Ÿï¼Œä¸ºå¼€å‘è€…æä¾›äº†ç±»å‹å®‰å…¨ã€é«˜æ•ˆä¸”æ˜“äºç»´æŠ¤çš„ç¼–ç¨‹ä½“éªŒã€‚

æœ¬ç« å°†ç³»ç»Ÿä¸”å…¨é¢åœ°ä»‹ç» Dart è¯­è¨€ä¸­çš„å„ç§æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ã€é›†åˆç±»å‹ï¼ˆåˆ—è¡¨ã€é›†åˆã€æ˜ å°„ï¼‰ä»¥åŠç‰¹æ®Šç±»å‹ï¼ˆåŠ¨æ€ç±»å‹ã€ç©ºç±»å‹ç­‰ï¼‰ã€‚åŒæ—¶ï¼Œå°†è¯¦ç»†è®²è§£æ¯ç§æ•°æ®ç±»å‹æ‰€æä¾›çš„å±æ€§ã€æ–¹æ³•åŠå…¶ API çš„ç”¨é€”ï¼Œå¹¶é…åˆå¤§é‡å®ä¾‹ä»£ç ï¼Œå¸®åŠ©è¯»è€…æ·±å…¥ç†è§£å¹¶ç†Ÿç»ƒè¿ç”¨ Dart çš„æ•°æ®ç±»å‹ç³»ç»Ÿã€‚

## ç¬¬1ç«  åŸºæœ¬æ•°æ®ç±»å‹

Dart ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹æ˜¯æ„å»ºç¨‹åºçš„åŸºçŸ³ï¼ŒåŒ…æ‹¬æ•°å­—ç±»å‹ï¼ˆ`num`ã€`int`ã€`double`ï¼‰ã€å­—ç¬¦ä¸²ç±»å‹ï¼ˆ`String`ï¼‰å’Œå¸ƒå°”ç±»å‹ï¼ˆ`bool`ï¼‰ã€‚è¿™äº›ç±»å‹åœ¨ Flutter å¼€å‘ä¸­ä½¿ç”¨é¢‘ç‡æé«˜ï¼Œæ˜¯æ¯ä½ Dart å¼€å‘è€…å¿…é¡»ç†Ÿç»ƒæŒæ¡çš„å†…å®¹ã€‚

### 1.1 æ•°å­—ç±»å‹

Dart ä¸­çš„æ•°å­—ç±»å‹ç”¨äºè¡¨ç¤ºæ•°å€¼æ•°æ®ï¼Œä¸»è¦åŒ…æ‹¬ `num`ï¼ˆæ•°å­—çš„æŠ½è±¡çˆ¶ç±»ï¼‰ã€`int`ï¼ˆæ•´æ•°ï¼‰å’Œ `double`ï¼ˆæµ®ç‚¹æ•°ï¼‰ä¸‰ç§ç±»å‹ã€‚å…¶ä¸­ `int` å’Œ `double` éƒ½ç»§æ‰¿è‡ª `num` ç±»å‹ï¼Œå› æ­¤å®ƒä»¬å…±äº« `num` ç±»å‹æä¾›çš„è®¸å¤šé€šç”¨æ–¹æ³•å’Œå±æ€§ã€‚

#### 1.1.1 num ç±»å‹

`num` æ˜¯ Dart ä¸­æ‰€æœ‰æ•°å­—ç±»å‹çš„æŠ½è±¡çˆ¶ç±»ï¼Œå®ƒå®šä¹‰äº†æ•°å­—ç±»å‹å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•ã€‚åœ¨éœ€è¦åŒæ—¶æ”¯æŒæ•´æ•°å’Œæµ®ç‚¹æ•°çš„åœºæ™¯ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `num` ç±»å‹ä½œä¸ºå˜é‡ç±»å‹ã€‚

**åŸºæœ¬ç”¨æ³•**

```dart
num a = 10;      // å¯ä»¥èµ‹å€¼ä¸ºæ•´æ•°
num b = 3.14;    // ä¹Ÿå¯ä»¥èµ‹å€¼ä¸ºæµ®ç‚¹æ•°
num c = a + b;   // è¿ç®—ç»“æœç±»å‹ä¸º num
print(c);        // è¾“å‡º: 13.14
```

#### 1.1.2 int ç±»å‹

`int` ç±»å‹ç”¨äºè¡¨ç¤ºæ•´æ•°ï¼Œå³ä¸åŒ…å«å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚åœ¨ Dart ä¸­ï¼Œ`int` ç±»å‹å¯ä»¥è¡¨ç¤ºä»»æ„å¤§å°çš„æ•´æ•°ï¼Œåªè¦è®¡ç®—æœºçš„å†…å­˜å…è®¸ã€‚

**åŸºæœ¬ç”¨æ³•**

```dart
int age = 25;
int temperature = -10;
int zero = 0;
int largeNumber = 9007199254740992;  // Dart æ”¯æŒå¤§æ•´æ•°
```

**å¸¸ç”¨å±æ€§**

1ï¼‰**bitLength**

è¿”å›è¡¨ç¤ºè¯¥æ•´æ•°æ‰€éœ€çš„æœ€å°äºŒè¿›åˆ¶ä½æ•°ï¼ˆä¸åŒ…æ‹¬ç¬¦å·ä½ï¼‰ã€‚è¿™ä¸ªå±æ€§åœ¨éœ€è¦äº†è§£æ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºå¤§å°æ—¶éå¸¸æœ‰ç”¨ã€‚

```dart
int value = 15;  // äºŒè¿›åˆ¶: 1111
print(value.bitLength);  // è¾“å‡º: 4

int largeValue = 1024;  // äºŒè¿›åˆ¶: 10000000000
print(largeValue.bitLength);  // è¾“å‡º: 11
```

2ï¼‰**isEven å’Œ isOdd**

`isEven` ç”¨äºåˆ¤æ–­æ•´æ•°æ˜¯å¦ä¸ºå¶æ•°ï¼Œ`isOdd` ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºå¥‡æ•°ã€‚è¿™ä¸¤ä¸ªå±æ€§è¿”å›å¸ƒå°”å€¼ï¼Œåœ¨éœ€è¦è¿›è¡Œå¥‡å¶åˆ¤æ–­æ—¶éå¸¸æ–¹ä¾¿ã€‚

```dart
int number = 42;
print(number.isEven);  // è¾“å‡º: true
print(number.isOdd);   // è¾“å‡º: false

// å®æˆ˜ä¸­å¸¸ç”¨äºæ¡ä»¶ç­›é€‰
if (number.isEven) {
  print('$number æ˜¯å¶æ•°');
}
```

3ï¼‰**sign**

è¿”å›æ•´æ•°çš„ç¬¦å·ï¼šæ­£æ•°è¿”å› `1`ï¼Œè´Ÿæ•°è¿”å› `-1`ï¼Œé›¶è¿”å› `0`ã€‚

```dart
print(10.sign);   // è¾“å‡º: 1
print(-5.sign);   // è¾“å‡º: -1
print(0.sign);    // è¾“å‡º: 0
```

**å¸¸ç”¨æ–¹æ³•**

1ï¼‰**abs()**

è¿”å›æ•´æ•°çš„ç»å¯¹å€¼ã€‚

```dart
int negative = -100;
print(negative.abs());  // è¾“å‡º: 100
```

2ï¼‰**toString()**

å°†æ•´æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚

```dart
int count = 42;
String str = count.toString();
print(str);  // è¾“å‡º: "42"
```

3ï¼‰**parse() å’Œ tryParse()**

`int.parse()` ç”¨äºå°†å­—ç¬¦ä¸²è§£æä¸ºæ•´æ•°ï¼Œå¦‚æœè§£æå¤±è´¥ä¼šæŠ›å‡ºå¼‚å¸¸ï¼›`int.tryParse()` åˆ™åœ¨è§£æå¤±è´¥æ—¶è¿”å› `null` è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚

```dart
// parse æ–¹æ³•
int value1 = int.parse('123');
print(value1);  // è¾“å‡º: 123

// tryParse æ–¹æ³•
int? value2 = int.tryParse('456');
print(value2);  // è¾“å‡º: 456

int? value3 = int.tryParse('abc');
print(value3);  // è¾“å‡º: null
```

#### 1.1.3 double ç±»å‹

`double` ç±»å‹ç”¨äºè¡¨ç¤ºåŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œå³åŒ…å«å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚Dart ä½¿ç”¨ 64 ä½åŒç²¾åº¦æ ¼å¼æ¥è¡¨ç¤º `double` ç±»å‹çš„å€¼ã€‚

**åŸºæœ¬ç”¨æ³•**

```dart
double pi = 3.14159;
double price = 19.99;
double scientific = 1.23e5;  // ç§‘å­¦è®¡æ•°æ³•ï¼Œè¡¨ç¤º 123000
```

**å¸¸ç”¨å±æ€§**

1ï¼‰**isFinite å’Œ isInfinite**

`isFinite` ç”¨äºåˆ¤æ–­æ•°å€¼æ˜¯å¦ä¸ºæœ‰é™æ•°ï¼Œ`isInfinite` ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºæ— ç©·å¤§ã€‚

```dart
double normal = 3.14;
print(normal.isFinite);    // è¾“å‡º: true
print(normal.isInfinite);  // è¾“å‡º: false

double infinity = 1 / 0;   // æ­£æ— ç©·å¤§
print(infinity.isInfinite);  // è¾“å‡º: true
```

2ï¼‰**isNaN**

ç”¨äºåˆ¤æ–­æ•°å€¼æ˜¯å¦ä¸ºéæ•°å­—ï¼ˆNot a Numberï¼‰ã€‚å½“è¿›è¡ŒæŸäº›æ— æ•ˆçš„æ•°å­¦è¿ç®—æ—¶ä¼šäº§ç”Ÿ NaNã€‚

```dart
double result = 0 / 0;
print(result.isNaN);  // è¾“å‡º: true
```

**å¸¸ç”¨æ–¹æ³•**

1ï¼‰**toStringAsFixed()**

å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæŒ‡å®šå°æ•°ä½æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚

```dart
double price = 19.995;
print(price.toStringAsFixed(2));  // è¾“å‡º: "20.00"

// å®æˆ˜ä¸­å¸¸ç”¨äºè´§å¸æ˜¾ç¤º
String displayPrice = '\$${price.toStringAsFixed(2)}';
print(displayPrice);  // è¾“å‡º: "$20.00"
```

2ï¼‰**toStringAsPrecision()**

å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæŒ‡å®šç²¾åº¦çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚

```dart
double value = 1234.5678;
print(value.toStringAsPrecision(4));  // è¾“å‡º: "1235"
print(value.toStringAsPrecision(6));  // è¾“å‡º: "1234.57"
```

3ï¼‰**round()ã€floor()ã€ceil()**

- `round()`ï¼šå››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°
- `floor()`ï¼šå‘ä¸‹å–æ•´
- `ceil()`ï¼šå‘ä¸Šå–æ•´

```dart
double value = 3.7;
print(value.round());  // è¾“å‡º: 4
print(value.floor());  // è¾“å‡º: 3
print(value.ceil());   // è¾“å‡º: 4
```

4ï¼‰**parse() å’Œ tryParse()**

ä¸ `int` ç±»å‹ç±»ä¼¼ï¼Œ`double` ä¹Ÿæä¾›äº†å­—ç¬¦ä¸²è§£ææ–¹æ³•ã€‚

```dart
double d1 = double.parse('3.14');
print(d1);  // è¾“å‡º: 3.14

double? d2 = double.tryParse('not a number');
print(d2);  // è¾“å‡º: null
```

#### 1.1.4 num ç±»å‹çš„é€šç”¨æ–¹æ³•

ç”±äº `int` å’Œ `double` éƒ½ç»§æ‰¿è‡ª `num`ï¼Œå®ƒä»¬å…±äº«ä»¥ä¸‹å¸¸ç”¨æ–¹æ³•ï¼š

1ï¼‰**clamp()**

å°†æ•°å€¼é™åˆ¶åœ¨æŒ‡å®šçš„æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´ã€‚

```dart
int score = 150;
int clampedScore = score.clamp(0, 100) as int;
print(clampedScore);  // è¾“å‡º: 100

// å®æˆ˜ä¸­å¸¸ç”¨äºé™åˆ¶è¾“å…¥èŒƒå›´
double opacity = 1.5;
double validOpacity = opacity.clamp(0.0, 1.0) as double;
print(validOpacity);  // è¾“å‡º: 1.0
```

2ï¼‰**compareTo()**

æ¯”è¾ƒä¸¤ä¸ªæ•°å­—çš„å¤§å°ï¼Œè¿”å› `-1`ã€`0` æˆ– `1`ã€‚

```dart
print(10.compareTo(5));   // è¾“å‡º: 1 (10 > 5)
print(5.compareTo(10));   // è¾“å‡º: -1 (5 < 10)
print(5.compareTo(5));    // è¾“å‡º: 0 (5 == 5)
```

3ï¼‰**remainder()**

è¿”å›é™¤æ³•è¿ç®—çš„ä½™æ•°ã€‚

```dart
print(17.remainder(5));  // è¾“å‡º: 2
print(10.remainder(3));  // è¾“å‡º: 1
```

4ï¼‰**toInt() å’Œ toDouble()**

- `toInt()`ï¼šå°†æ•°å­—è½¬æ¢ä¸ºæ•´æ•°ï¼ˆæˆªæ–­å°æ•°éƒ¨åˆ†ï¼‰
- `toDouble()`ï¼šå°†æ•°å­—è½¬æ¢ä¸ºæµ®ç‚¹æ•°

```dart
double pi = 3.14159;
print(pi.toInt());      // è¾“å‡º: 3

int count = 42;
print(count.toDouble());  // è¾“å‡º: 42.0
```

**Dart Tips è¯­æ³•å°è´´å£«**

æ•´æ•°é™¤æ³•ä¸æµ®ç‚¹æ•°é™¤æ³•çš„åŒºåˆ«

åœ¨ Dart ä¸­ï¼Œé™¤æ³•è¿ç®—ç¬¦ `/` æ€»æ˜¯è¿”å› `double` ç±»å‹çš„ç»“æœï¼Œå³ä½¿ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯æ•´æ•°ã€‚å¦‚æœéœ€è¦è¿›è¡Œæ•´æ•°é™¤æ³•ï¼ˆè¿”å›æ•´æ•°ç»“æœï¼‰ï¼Œåº”ä½¿ç”¨ `~/` è¿ç®—ç¬¦ã€‚

```dart
print(10 / 3);   // è¾“å‡º: 3.3333333333333335 (double)
print(10 ~/ 3);  // è¾“å‡º: 3 (int)
print(10 % 3);   // è¾“å‡º: 1 (å–ä½™)
```

### 1.2 å­—ç¬¦ä¸²ç±»å‹

`String` ç±»å‹æ˜¯ Dart ä¸­ç”¨äºè¡¨ç¤ºæ–‡æœ¬æ•°æ®çš„æ•°æ®ç±»å‹ã€‚å­—ç¬¦ä¸²æ˜¯ç”± UTF-16 ç¼–ç å•å…ƒç»„æˆçš„ä¸å¯å˜åºåˆ—ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦åˆ›å»ºï¼Œå­—ç¬¦ä¸²çš„å†…å®¹å°±ä¸èƒ½è¢«ä¿®æ”¹ã€‚

#### 1.2.1 å­—ç¬¦ä¸²çš„åˆ›å»ºæ–¹å¼

Dart æä¾›äº†å¤šç§åˆ›å»ºå­—ç¬¦ä¸²çš„æ–¹å¼ï¼š

**1ï¼‰å•å¼•å·å’ŒåŒå¼•å·**

Dart å…è®¸ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·æ¥åˆ›å»ºå­—ç¬¦ä¸²ï¼Œä¸¤è€…å®Œå…¨ç­‰ä»·ã€‚

```dart
String str1 = 'Hello, Dart!';
String str2 = "Hello, Dart!";
```

**2ï¼‰ä¸‰å¼•å·åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²**

ä½¿ç”¨ä¸‰ä¸ªå•å¼•å·æˆ–ä¸‰ä¸ªåŒå¼•å·å¯ä»¥åˆ›å»ºè·¨è¶Šå¤šè¡Œçš„å­—ç¬¦ä¸²ã€‚

```dart
String multiLine = '''
è¿™æ˜¯ç¬¬ä¸€è¡Œ
è¿™æ˜¯ç¬¬äºŒè¡Œ
è¿™æ˜¯ç¬¬ä¸‰è¡Œ
''';

String html = """
<div>
  <p>Hello, World!</p>
</div>
""";
```

**3ï¼‰åŸå§‹å­—ç¬¦ä¸²ï¼ˆRaw Stringï¼‰**

åœ¨å­—ç¬¦ä¸²å‰åŠ  `r` å‰ç¼€å¯ä»¥åˆ›å»ºåŸå§‹å­—ç¬¦ä¸²ï¼Œå…¶ä¸­çš„è½¬ä¹‰å­—ç¬¦ä¸ä¼šè¢«å¤„ç†ã€‚

```dart
String normal = 'Hello\nWorld';  // ä¼šæ¢è¡Œ
String raw = r'Hello\nWorld';    // åŸæ ·è¾“å‡º: Hello\nWorld

// å®æˆ˜ä¸­å¸¸ç”¨äºæ­£åˆ™è¡¨è¾¾å¼
String pattern = r'\d+\.\d+';
```

#### 1.2.2 å­—ç¬¦ä¸²æ’å€¼

Dart æä¾›äº†æ–¹ä¾¿çš„å­—ç¬¦ä¸²æ’å€¼è¯­æ³•ï¼Œä½¿ç”¨ `$` ç¬¦å·å°†å˜é‡æˆ–è¡¨è¾¾å¼çš„å€¼åµŒå…¥åˆ°å­—ç¬¦ä¸²ä¸­ã€‚

```dart
String name = 'Alice';
int age = 25;

// ç®€å•æ’å€¼
print('My name is $name');  // è¾“å‡º: My name is Alice

// è¡¨è¾¾å¼æ’å€¼
print('I am $age years old');  // è¾“å‡º: I am 25 years old
print('Next year I will be ${age + 1}');  // è¾“å‡º: Next year I will be 26

// è®¿é—®å¯¹è±¡å±æ€§
print('Name length: ${name.length}');  // è¾“å‡º: Name length: 5
```

#### 1.2.3 å¸¸ç”¨å±æ€§

1ï¼‰**length**

è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆå­—ç¬¦æ•°ï¼‰ã€‚

```dart
String text = 'Hello, Dart!';
print(text.length);  // è¾“å‡º: 12
```

2ï¼‰**isEmpty å’Œ isNotEmpty**

ç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºã€‚

```dart
String empty = '';
print(empty.isEmpty);      // è¾“å‡º: true
print(empty.isNotEmpty);   // è¾“å‡º: false

// å®æˆ˜ä¸­å¸¸ç”¨äºè¾“å…¥éªŒè¯
String? userInput;
if (userInput?.isNotEmpty ?? false) {
  print('è¾“å…¥æœ‰æ•ˆ');
}
```

3ï¼‰**codeUnits å’Œ runes**

- `codeUnits`ï¼šè¿”å›å­—ç¬¦ä¸²çš„ UTF-16 ç¼–ç å•å…ƒåˆ—è¡¨
- `runes`ï¼šè¿”å›å­—ç¬¦ä¸²çš„ Unicode ç ç‚¹åˆ—è¡¨

```dart
String emoji = 'ğŸ˜€';
print(emoji.codeUnits);  // è¾“å‡º: [55357, 56832]
print(emoji.runes.toList());  // è¾“å‡º: [128512]
```

#### 1.2.4 å¸¸ç”¨æ–¹æ³•

1ï¼‰**substring()**

æå–å­—ç¬¦ä¸²çš„å­ä¸²ï¼Œä» `startIndex` å¼€å§‹ï¼ˆåŒ…å«ï¼‰ï¼Œåˆ° `endIndex` ç»“æŸï¼ˆä¸åŒ…å«ï¼‰ã€‚

```dart
String text = 'Hello, Dart!';
print(text.substring(0, 5));   // è¾“å‡º: Hello
print(text.substring(7));      // è¾“å‡º: Dart! (ä»ç´¢å¼•7åˆ°æœ«å°¾)
```

2ï¼‰**contains()**

æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­ä¸²æˆ–åŒ¹é…æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚

```dart
String text = 'Hello, Dart!';
print(text.contains('Dart'));     // è¾“å‡º: true
print(text.contains('Java'));     // è¾“å‡º: false
print(text.contains(RegExp(r'[A-Z]')));  // è¾“å‡º: true (åŒ…å«å¤§å†™å­—æ¯)
```

3ï¼‰**startsWith() å’Œ endsWith()**

æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å‰ç¼€å¼€å¤´æˆ–ä»¥æŒ‡å®šçš„åç¼€ç»“å°¾ã€‚

```dart
String fileName = 'document.pdf';
print(fileName.startsWith('doc'));  // è¾“å‡º: true
print(fileName.endsWith('.pdf'));   // è¾“å‡º: true
print(fileName.endsWith('.txt'));   // è¾“å‡º: false
```

4ï¼‰**indexOf() å’Œ lastIndexOf()**

- `indexOf()`ï¼šè¿”å›å­ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œæœªæ‰¾åˆ°è¿”å› `-1`
- `lastIndexOf()`ï¼šè¿”å›å­ä¸²æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•

```dart
String text = 'Hello, World! Hello, Dart!';
print(text.indexOf('Hello'));      // è¾“å‡º: 0
print(text.indexOf('Hello', 5));   // è¾“å‡º: 14 (ä»ç´¢å¼•5å¼€å§‹æŸ¥æ‰¾)
print(text.lastIndexOf('Hello'));  // è¾“å‡º: 14
print(text.indexOf('Java'));       // è¾“å‡º: -1
```

5ï¼‰**replaceAll()ã€replaceFirst()ã€replaceRange()**

- `replaceAll()`ï¼šæ›¿æ¢æ‰€æœ‰åŒ¹é…çš„å­ä¸²
- `replaceFirst()`ï¼šåªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…çš„å­ä¸²
- `replaceRange()`ï¼šæ›¿æ¢æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦

```dart
String text = 'Hello, World! Hello, Dart!';
print(text.replaceAll('Hello', 'Hi'));  // è¾“å‡º: Hi, World! Hi, Dart!
print(text.replaceFirst('Hello', 'Hi'));  // è¾“å‡º: Hi, World! Hello, Dart!
print(text.replaceRange(0, 5, 'Hi'));  // è¾“å‡º: Hi, World! Hello, Dart!
```

6ï¼‰**split()**

å°†å­—ç¬¦ä¸²æŒ‰æŒ‡å®šçš„åˆ†éš”ç¬¦åˆ†å‰²æˆåˆ—è¡¨ã€‚

```dart
String csv = 'apple,banana,orange';
List<String> fruits = csv.split(',');
print(fruits);  // è¾“å‡º: [apple, banana, orange]

// å®æˆ˜ä¸­å¸¸ç”¨äºè§£æ CSV æ•°æ®
String data = 'Alice,25,Engineer';
List<String> parts = data.split(',');
String name = parts[0];
int age = int.parse(parts[1]);
```

7ï¼‰**trim()ã€trimLeft()ã€trimRight()**

å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯æˆ–æŒ‡å®šä¸€ç«¯çš„ç©ºç™½å­—ç¬¦ã€‚

```dart
String text = '  Hello, Dart!  ';
print(text.trim());       // è¾“å‡º: "Hello, Dart!"
print(text.trimLeft());   // è¾“å‡º: "Hello, Dart!  "
print(text.trimRight());  // è¾“å‡º: "  Hello, Dart!"
```

8ï¼‰**toUpperCase() å’Œ toLowerCase()**

å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™æˆ–å°å†™ã€‚

```dart
String text = 'Hello, Dart!';
print(text.toUpperCase());  // è¾“å‡º: HELLO, DART!
print(text.toLowerCase());  // è¾“å‡º: hello, dart!

// å®æˆ˜ä¸­å¸¸ç”¨äºä¸åŒºåˆ†å¤§å°å†™çš„æ¯”è¾ƒ
String input = 'YES';
if (input.toLowerCase() == 'yes') {
  print('ç”¨æˆ·ç¡®è®¤');
}
```

9ï¼‰**padLeft() å’Œ padRight()**

åœ¨å­—ç¬¦ä¸²çš„å·¦ä¾§æˆ–å³ä¾§å¡«å……å­—ç¬¦ï¼Œä½¿å­—ç¬¦ä¸²è¾¾åˆ°æŒ‡å®šçš„é•¿åº¦ã€‚

```dart
String number = '42';
print(number.padLeft(5, '0'));   // è¾“å‡º: 00042
print(number.padRight(5, '*'));  // è¾“å‡º: 42***

// å®æˆ˜ä¸­å¸¸ç”¨äºæ ¼å¼åŒ–æ•°å­—æ˜¾ç¤º
int hour = 9;
String displayHour = hour.toString().padLeft(2, '0');
print('$displayHour:00');  // è¾“å‡º: 09:00
```

10ï¼‰**join()**

`String` ç±»æœ¬èº«æ²¡æœ‰ `join()` æ–¹æ³•ï¼Œä½† `List` ç±»æœ‰ï¼Œå¸¸ç”¨äºå°†åˆ—è¡¨å…ƒç´ è¿æ¥æˆå­—ç¬¦ä¸²ã€‚

```dart
List<String> words = ['Hello', 'Dart', 'World'];
String sentence = words.join(' ');
print(sentence);  // è¾“å‡º: Hello Dart World
```

**Flutter æ¡†æ¶å°çŸ¥è¯†**

å­—ç¬¦ä¸²ä¸ Text ç»„ä»¶çš„é…åˆ

åœ¨ Flutter ä¸­ï¼Œ`Text` ç»„ä»¶ç”¨äºæ˜¾ç¤ºæ–‡æœ¬ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª `String` ç±»å‹çš„å‚æ•°ã€‚ç”±äº Dart å­—ç¬¦ä¸²æ”¯æŒæ’å€¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†åŠ¨æ€æ•°æ®åµŒå…¥åˆ°ç•Œé¢æ–‡æœ¬ä¸­ã€‚

```dart
Text('Hello, $name!')
Text('Count: ${counter.value}')
Text('Price: \$${price.toStringAsFixed(2)}')
```

### 1.3 å¸ƒå°”ç±»å‹

`bool` ç±»å‹æ˜¯ Dart ä¸­ç”¨äºè¡¨ç¤ºé€»è¾‘å€¼çš„æ•°æ®ç±»å‹ï¼Œåªæœ‰ä¸¤ä¸ªå¯èƒ½çš„å–å€¼ï¼š`true`ï¼ˆçœŸï¼‰å’Œ `false`ï¼ˆå‡ï¼‰ã€‚å¸ƒå°”ç±»å‹åœ¨æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯æ§åˆ¶å’Œé€»è¾‘è¿ç®—ä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚

#### 1.3.1 åŸºæœ¬ç”¨æ³•

```dart
bool isActive = true;
bool isCompleted = false;
bool hasPermission = true;
```

#### 1.3.2 é€»è¾‘è¿ç®—ç¬¦

Dart æä¾›äº†ä¸‰ç§é€»è¾‘è¿ç®—ç¬¦ç”¨äºç»„åˆå¸ƒå°”å€¼ï¼š

1ï¼‰**é€»è¾‘ä¸ï¼ˆ&&ï¼‰**

åªæœ‰å½“ä¸¤ä¸ªæ“ä½œæ•°éƒ½ä¸º `true` æ—¶ï¼Œç»“æœæ‰ä¸º `true`ã€‚

```dart
bool a = true;
bool b = false;
print(a && b);  // è¾“å‡º: false
print(a && true);  // è¾“å‡º: true
```

2ï¼‰**é€»è¾‘æˆ–ï¼ˆ||ï¼‰**

åªè¦æœ‰ä¸€ä¸ªæ“ä½œæ•°ä¸º `true`ï¼Œç»“æœå°±ä¸º `true`ã€‚

```dart
bool a = true;
bool b = false;
print(a || b);  // è¾“å‡º: true
print(false || false);  // è¾“å‡º: false
```

3ï¼‰**é€»è¾‘éï¼ˆ!ï¼‰**

å¯¹å¸ƒå°”å€¼å–åã€‚

```dart
bool flag = true;
print(!flag);  // è¾“å‡º: false
print(!false);  // è¾“å‡º: true
```

#### 1.3.3 æ¯”è¾ƒè¿ç®—ç¬¦

æ¯”è¾ƒè¿ç®—ç¬¦ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œè¿”å›å¸ƒå°”ç»“æœã€‚

```dart
int a = 10;
int b = 20;

print(a == b);  // ç­‰äºï¼Œè¾“å‡º: false
print(a != b);  // ä¸ç­‰äºï¼Œè¾“å‡º: true
print(a < b);   // å°äºï¼Œè¾“å‡º: true
print(a > b);   // å¤§äºï¼Œè¾“å‡º: false
print(a <= b);  // å°äºç­‰äºï¼Œè¾“å‡º: true
print(a >= b);  // å¤§äºç­‰äºï¼Œè¾“å‡º: false
```

#### 1.3.4 å®æˆ˜åº”ç”¨

å¸ƒå°”ç±»å‹åœ¨ Flutter å¼€å‘ä¸­å¸¸ç”¨äºæ§åˆ¶ç•Œé¢å…ƒç´ çš„æ˜¾ç¤ºçŠ¶æ€å’Œäº¤äº’è¡Œä¸ºã€‚

```dart
// æ§åˆ¶æŒ‰é’®çš„å¯ç”¨çŠ¶æ€
bool isFormValid = true;
ElevatedButton(
  onPressed: isFormValid ? () => submitForm() : null,
  child: Text('æäº¤'),
)

// æ¡ä»¶æ¸²æŸ“
bool showLoading = true;
showLoading ? CircularProgressIndicator() : Text('åŠ è½½å®Œæˆ')

// æƒé™æ£€æŸ¥
bool hasCameraPermission = await checkCameraPermission();
if (!hasCameraPermission) {
  await requestCameraPermission();
}
```

**Dart Tips è¯­æ³•å°è´´å£«**

å¸ƒå°”ç±»å‹ä¸ JavaScript çš„åŒºåˆ«

ä¸ JavaScript ä¸åŒï¼ŒDart çš„å¸ƒå°”ç±»å‹æ˜¯ä¸¥æ ¼çš„ã€‚åœ¨ Dart ä¸­ï¼Œåªæœ‰ `true` è¢«è§†ä¸ºçœŸï¼Œåªæœ‰ `false` è¢«è§†ä¸ºå‡ã€‚å…¶ä»–å€¼ï¼ˆå¦‚ `0`ã€ç©ºå­—ç¬¦ä¸²ã€`null` ç­‰ï¼‰ä¸ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºå¸ƒå°”å€¼ã€‚

```dart
// JavaScript ä¸­è¿™æ ·å†™æ˜¯åˆæ³•çš„
// if (0) { ... }

// Dart ä¸­ä¼šæŠ¥é”™
// if (0) { ... }  // é”™è¯¯: æ¡ä»¶å¿…é¡»æ˜¯å¸ƒå°”å€¼

// æ­£ç¡®çš„å†™æ³•
int count = 0;
if (count > 0) { ... }
if (count == 0) { ... }

// æ£€æŸ¥ç©ºå­—ç¬¦ä¸²
String text = '';
if (text.isNotEmpty) { ... }  // æ­£ç¡®
// if (text) { ... }  // é”™è¯¯
```

## ç¬¬2ç«  é›†åˆç±»å‹

é›†åˆç±»å‹æ˜¯ Dart ä¸­ç”¨äºå­˜å‚¨å¤šä¸ªå€¼çš„æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬ `List`ï¼ˆåˆ—è¡¨ï¼‰ã€`Set`ï¼ˆé›†åˆï¼‰å’Œ `Map`ï¼ˆæ˜ å°„ï¼‰ã€‚è¿™äº›ç±»å‹åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶éå¸¸æœ‰ç”¨ï¼ŒFlutter å¼€å‘ä¸­å‡ ä¹æ— å¤„ä¸åœ¨ã€‚

### 2.1 Listï¼ˆåˆ—è¡¨ï¼‰

`List` æ˜¯ Dart ä¸­æœ€å¸¸ç”¨çš„é›†åˆç±»å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ‰åºçš„å…ƒç´ é›†åˆï¼Œå…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´ ã€‚åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç´¢å¼•ï¼Œä» `0` å¼€å§‹ã€‚

#### 2.1.1 åˆ›å»ºåˆ—è¡¨

Dart æä¾›äº†å¤šç§åˆ›å»ºåˆ—è¡¨çš„æ–¹å¼ï¼š

**1ï¼‰ä½¿ç”¨å­—é¢é‡åˆ›å»º**

```dart
// åˆ›å»ºæ•´æ•°åˆ—è¡¨
List<int> numbers = [1, 2, 3, 4, 5];

// åˆ›å»ºå­—ç¬¦ä¸²åˆ—è¡¨
List<String> fruits = ['apple', 'banana', 'orange'];

// åˆ›å»ºåŠ¨æ€ç±»å‹åˆ—è¡¨
var mixed = [1, 'two', 3.0, true];

// åˆ›å»ºç©ºåˆ—è¡¨
List<int> empty = [];
var empty2 = <int>[];
```

**2ï¼‰ä½¿ç”¨ List æ„é€ å‡½æ•°**

```dart
// åˆ›å»ºå›ºå®šé•¿åº¦çš„åˆ—è¡¨
var fixed = List.filled(3, 0);  // [0, 0, 0]

// åˆ›å»ºå¯ç”Ÿæˆå…ƒç´ çš„åˆ—è¡¨
var generated = List.generate(5, (index) => index * 2);  // [0, 2, 4, 6, 8]

// åˆ›å»ºç©ºåˆ—è¡¨ï¼ˆå¯å¢é•¿ï¼‰
var growable = List<int>.empty(growable: true);
```

**3ï¼‰åˆ›å»ºä¸å¯å˜åˆ—è¡¨**

```dart
var immutable = const [1, 2, 3];
// immutable[0] = 10;  // é”™è¯¯: æ— æ³•ä¿®æ”¹ä¸å¯å˜åˆ—è¡¨
```

#### 2.1.2 å¸¸ç”¨å±æ€§

1ï¼‰**length**

è¿”å›åˆ—è¡¨ä¸­å…ƒç´ çš„æ•°é‡ã€‚

```dart
List<String> fruits = ['apple', 'banana', 'orange'];
print(fruits.length);  // è¾“å‡º: 3
```

2ï¼‰**isEmpty å’Œ isNotEmpty**

æ£€æŸ¥åˆ—è¡¨æ˜¯å¦ä¸ºç©ºã€‚

```dart
List<String> list1 = [];
List<String> list2 = ['a'];

print(list1.isEmpty);      // è¾“å‡º: true
print(list1.isNotEmpty);   // è¾“å‡º: false
print(list2.isEmpty);      // è¾“å‡º: false
```

3ï¼‰**first å’Œ last**

è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå…ƒç´ ã€‚

```dart
List<int> numbers = [10, 20, 30];
print(numbers.first);  // è¾“å‡º: 10
print(numbers.last);   // è¾“å‡º: 30

// ç©ºåˆ—è¡¨è®¿é—®ä¼šæŠ¥é”™
List<int> empty = [];
// print(empty.first);  // é”™è¯¯: ç©ºåˆ—è¡¨æ²¡æœ‰ç¬¬ä¸€ä¸ªå…ƒç´ 
```

4ï¼‰**reversed**

è¿”å›åˆ—è¡¨çš„åå‘è¿­ä»£å™¨ã€‚

```dart
List<int> numbers = [1, 2, 3, 4, 5];
print(numbers.reversed.toList());  // è¾“å‡º: [5, 4, 3, 2, 1]
```

#### 2.1.3 å¸¸ç”¨æ–¹æ³•

1ï¼‰**æ·»åŠ å…ƒç´ **

- `add()`ï¼šåœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ 
- `addAll()`ï¼šåœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ å¤šä¸ªå…ƒç´ 
- `insert()`ï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ 
- `insertAll()`ï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥å¤šä¸ªå…ƒç´ 

```dart
List<String> fruits = ['apple'];

fruits.add('banana');
print(fruits);  // è¾“å‡º: [apple, banana]

fruits.addAll(['orange', 'grape']);
print(fruits);  // è¾“å‡º: [apple, banana, orange, grape]

fruits.insert(1, 'mango');
print(fruits);  // è¾“å‡º: [apple, mango, banana, orange, grape]

fruits.insertAll(0, ['kiwi', 'peach']);
print(fruits);  // è¾“å‡º: [kiwi, peach, apple, mango, banana, orange, grape]
```

2ï¼‰**åˆ é™¤å…ƒç´ **

- `remove()`ï¼šåˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ 
- `removeAt()`ï¼šåˆ é™¤æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ 
- `removeLast()`ï¼šåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ 
- `removeWhere()`ï¼šåˆ é™¤æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰å…ƒç´ 
- `clear()`ï¼šæ¸…ç©ºåˆ—è¡¨

```dart
List<int> numbers = [1, 2, 3, 2, 4];

numbers.remove(2);  // åˆ é™¤ç¬¬ä¸€ä¸ª 2
print(numbers);  // è¾“å‡º: [1, 3, 2, 4]

numbers.removeAt(0);  // åˆ é™¤ç´¢å¼• 0 çš„å…ƒç´ 
print(numbers);  // è¾“å‡º: [3, 2, 4]

numbers.removeLast();
print(numbers);  // è¾“å‡º: [3, 2]

numbers.removeWhere((n) => n > 2);
print(numbers);  // è¾“å‡º: [2]

numbers.clear();
print(numbers);  // è¾“å‡º: []
```

3ï¼‰**æŸ¥æ‰¾å…ƒç´ **

- `indexOf()`ï¼šè¿”å›å…ƒç´ çš„ç´¢å¼•ï¼Œæœªæ‰¾åˆ°è¿”å› `-1`
- `lastIndexOf()`ï¼šè¿”å›å…ƒç´ æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•
- `contains()`ï¼šæ£€æŸ¥åˆ—è¡¨æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ 

```dart
List<String> fruits = ['apple', 'banana', 'orange', 'banana'];

print(fruits.indexOf('banana'));      // è¾“å‡º: 1
print(fruits.lastIndexOf('banana'));  // è¾“å‡º: 3
print(fruits.indexOf('grape'));       // è¾“å‡º: -1
print(fruits.contains('apple'));      // è¾“å‡º: true
```

4ï¼‰**è®¿é—®å’Œä¿®æ”¹å…ƒç´ **

```dart
List<String> fruits = ['apple', 'banana', 'orange'];

// è®¿é—®å…ƒç´ 
print(fruits[0]);  // è¾“å‡º: apple

// ä¿®æ”¹å…ƒç´ 
fruits[1] = 'mango';
print(fruits);  // è¾“å‡º: [apple, mango, orange]

// è·å–å­åˆ—è¡¨
print(fruits.sublist(0, 2));  // è¾“å‡º: [apple, mango]
```

5ï¼‰**æ’åº**

- `sort()`ï¼šå¯¹åˆ—è¡¨è¿›è¡ŒåŸåœ°æ’åº
- `reversed`ï¼šè¿”å›åå‘è¿­ä»£å™¨ï¼ˆä¸ä¿®æ”¹åŸåˆ—è¡¨ï¼‰

```dart
List<int> numbers = [3, 1, 4, 1, 5, 9, 2, 6];

numbers.sort();
print(numbers);  // è¾“å‡º: [1, 1, 2, 3, 4, 5, 6, 9]

// è‡ªå®šä¹‰æ’åº
List<String> fruits = ['banana', 'apple', 'orange'];
fruits.sort((a, b) => a.length.compareTo(b.length));
print(fruits);  // è¾“å‡º: [apple, banana, orange] (æŒ‰é•¿åº¦æ’åº)

// é™åºæ’åº
numbers.sort((a, b) => b.compareTo(a));
print(numbers);  // è¾“å‡º: [9, 6, 5, 4, 3, 2, 1, 1]
```

6ï¼‰**é«˜é˜¶å‡½æ•°æ–¹æ³•**

Dart çš„ `List` ç±»æä¾›äº†è®¸å¤šå¼ºå¤§çš„é«˜é˜¶å‡½æ•°æ–¹æ³•ï¼š

**forEach()**ï¼šéå†åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚

```dart
List<String> fruits = ['apple', 'banana', 'orange'];
fruits.forEach((fruit) => print('I like $fruit'));
```

**map()**ï¼šå°†åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºæ–°çš„å€¼ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Iterableã€‚

```dart
List<int> numbers = [1, 2, 3, 4, 5];
var doubled = numbers.map((n) => n * 2);
print(doubled.toList());  // è¾“å‡º: [2, 4, 6, 8, 10]

// å®æˆ˜ä¸­å¸¸ç”¨äºæ•°æ®è½¬æ¢
List<String> numberStrings = numbers.map((n) => 'Number $n').toList();
print(numberStrings);  // è¾“å‡º: [Number 1, Number 2, Number 3, Number 4, Number 5]
```

**where()**ï¼šè¿‡æ»¤åˆ—è¡¨ï¼Œåªä¿ç•™æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚

```dart
List<int> numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
var evens = numbers.where((n) => n.isEven);
print(evens.toList());  // è¾“å‡º: [2, 4, 6, 8, 10]

// å®æˆ˜ä¸­å¸¸ç”¨äºç­›é€‰æ•°æ®
List<String> fruits = ['apple', 'banana', 'apricot', 'orange'];
var aFruits = fruits.where((f) => f.startsWith('a')).toList();
print(aFruits);  // è¾“å‡º: [apple, apricot]
```

**any()**ï¼šæ£€æŸ¥åˆ—è¡¨ä¸­æ˜¯å¦æœ‰è‡³å°‘ä¸€ä¸ªå…ƒç´ æ»¡è¶³æ¡ä»¶ã€‚

```dart
List<int> numbers = [1, 3, 5, 7, 8, 9];
print(numbers.any((n) => n.isEven));  // è¾“å‡º: true (8 æ˜¯å¶æ•°)
print(numbers.any((n) => n > 10));    // è¾“å‡º: false
```

**every()**ï¼šæ£€æŸ¥åˆ—è¡¨ä¸­æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³æ¡ä»¶ã€‚

```dart
List<int> numbers = [2, 4, 6, 8, 10];
print(numbers.every((n) => n.isEven));  // è¾“å‡º: true
print(numbers.every((n) => n > 5));     // è¾“å‡º: false
```

**reduce()**ï¼šå°†åˆ—è¡¨ä¸­çš„å…ƒç´ ç´¯ç§¯ä¸ºä¸€ä¸ªå€¼ã€‚

```dart
List<int> numbers = [1, 2, 3, 4, 5];
var sum = numbers.reduce((value, element) => value + element);
print(sum);  // è¾“å‡º: 15

// æ±‚æœ€å¤§å€¼
var max = numbers.reduce((a, b) => a > b ? a : b);
print(max);  // è¾“å‡º: 5
```

**fold()**ï¼šä¸ `reduce()` ç±»ä¼¼ï¼Œä½†å¯ä»¥æŒ‡å®šåˆå§‹å€¼ã€‚

```dart
List<int> numbers = [1, 2, 3, 4, 5];
var sum = numbers.fold<int>(0, (prev, curr) => prev + curr);
print(sum);  // è¾“å‡º: 15

// å­—ç¬¦ä¸²è¿æ¥
List<String> words = ['Hello', 'Dart', 'World'];
var sentence = words.fold<String>('', (prev, curr) => '$prev $curr').trim();
print(sentence);  // è¾“å‡º: Hello Dart World
```

**expand()**ï¼šå°†æ¯ä¸ªå…ƒç´ æ‰©å±•ä¸ºé›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚

```dart
List<List<int>> nested = [[1, 2], [3, 4], [5, 6]];
var flattened = nested.expand((list) => list);
print(flattened.toList());  // è¾“å‡º: [1, 2, 3, 4, 5, 6]
```

**take() å’Œ skip()**

- `take(n)`ï¼šå–åˆ—è¡¨çš„å‰ n ä¸ªå…ƒç´ 
- `skip(n)`ï¼šè·³è¿‡å‰ n ä¸ªå…ƒç´ 

```dart
List<int> numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
print(numbers.take(3).toList());   // è¾“å‡º: [1, 2, 3]
print(numbers.skip(7).toList());   // è¾“å‡º: [8, 9, 10]
print(numbers.skip(3).take(4).toList());  // è¾“å‡º: [4, 5, 6, 7]
```

**firstWhere() å’Œ lastWhere()**

- `firstWhere()`ï¼šè¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ 
- `lastWhere()`ï¼šè¿”å›æœ€åä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ 

```dart
List<int> numbers = [1, 3, 5, 2, 4, 6];
var firstEven = numbers.firstWhere((n) => n.isEven);
print(firstEven);  // è¾“å‡º: 2

var lastEven = numbers.lastWhere((n) => n.isEven);
print(lastEven);  // è¾“å‡º: 6

// æä¾›é»˜è®¤å€¼
var firstLarge = numbers.firstWhere(
  (n) => n > 10,
  orElse: () => -1,
);
print(firstLarge);  // è¾“å‡º: -1
```

#### 2.1.4 åˆ—è¡¨ä¸å­—ç¬¦ä¸²çš„è½¬æ¢

```dart
// å­—ç¬¦ä¸²åˆ†å‰²ä¸ºåˆ—è¡¨
String csv = 'apple,banana,orange';
List<String> fruits = csv.split(',');
print(fruits);  // è¾“å‡º: [apple, banana, orange]

// åˆ—è¡¨è¿æ¥ä¸ºå­—ç¬¦ä¸²
List<String> words = ['Hello', 'Dart'];
String sentence = words.join(' ');
print(sentence);  // è¾“å‡º: Hello Dart

// å­—ç¬¦åˆ—è¡¨è½¬å­—ç¬¦ä¸²
List<String> chars = ['H', 'e', 'l', 'l', 'o'];
String word = chars.join();
print(word);  // è¾“å‡º: Hello
```

### 2.2 Setï¼ˆé›†åˆï¼‰

`Set` æ˜¯ Dart ä¸­ç”¨äºå­˜å‚¨æ— åºä¸”å”¯ä¸€å…ƒç´ çš„æ•°æ®ç±»å‹ã€‚ä¸ `List` ä¸åŒï¼Œ`Set` ä¸å…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´ ï¼Œä¸”ä¸ä¿è¯å…ƒç´ çš„é¡ºåºã€‚

#### 2.2.1 åˆ›å»ºé›†åˆ

```dart
// ä½¿ç”¨å­—é¢é‡åˆ›å»º
Set<String> fruits = {'apple', 'banana', 'orange'};

// ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»º
Set<int> numbers = Set<int>();

// ä»åˆ—è¡¨åˆ›å»º
Set<int> uniqueNumbers = [1, 2, 2, 3, 3, 3].toSet();
print(uniqueNumbers);  // è¾“å‡º: {1, 2, 3}

// åˆ›å»ºä¸å¯å˜é›†åˆ
const Set<String> immutable = {'a', 'b', 'c'};
```

#### 2.2.2 å¸¸ç”¨å±æ€§

`Set` çš„å±æ€§ä¸ `List` ç±»ä¼¼ï¼š

```dart
Set<String> fruits = {'apple', 'banana', 'orange'};

print(fruits.length);      // è¾“å‡º: 3
print(fruits.isEmpty);     // è¾“å‡º: false
print(fruits.isNotEmpty);  // è¾“å‡º: true
print(fruits.first);       // è¾“å‡º: apple (ä¸ä¿è¯é¡ºåº)
print(fruits.last);        // è¾“å‡º: orange (ä¸ä¿è¯é¡ºåº)
```

#### 2.2.3 å¸¸ç”¨æ–¹æ³•

1ï¼‰**æ·»åŠ å’Œåˆ é™¤å…ƒç´ **

```dart
Set<String> fruits = {'apple'};

fruits.add('banana');
print(fruits);  // è¾“å‡º: {apple, banana}

fruits.add('apple');  // é‡å¤å…ƒç´ ä¸ä¼šè¢«æ·»åŠ 
print(fruits);  // è¾“å‡º: {apple, banana}

fruits.addAll(['orange', 'grape']);
print(fruits);  // è¾“å‡º: {apple, banana, orange, grape}

fruits.remove('banana');
print(fruits);  // è¾“å‡º: {apple, orange, grape}

fruits.clear();
print(fruits);  // è¾“å‡º: {}
```

2ï¼‰**é›†åˆè¿ç®—**

`Set` æä¾›äº†ä¸°å¯Œçš„é›†åˆè¿ç®—æ–¹æ³•ï¼š

```dart
Set<int> setA = {1, 2, 3, 4};
Set<int> setB = {3, 4, 5, 6};

// å¹¶é›†
print(setA.union(setB));  // è¾“å‡º: {1, 2, 3, 4, 5, 6}

// äº¤é›†
print(setA.intersection(setB));  // è¾“å‡º: {3, 4}

// å·®é›† (åœ¨ A ä¸­ä½†ä¸åœ¨ B ä¸­)
print(setA.difference(setB));  // è¾“å‡º: {1, 2}

// å¯¹ç§°å·®é›† (åªåœ¨ A æˆ–åªåœ¨ B ä¸­)
print(setA.difference(setB).union(setB.difference(setA)));  // è¾“å‡º: {1, 2, 5, 6}
```

3ï¼‰**æŸ¥æ‰¾å…ƒç´ **

```dart
Set<String> fruits = {'apple', 'banana', 'orange'};

print(fruits.contains('apple'));   // è¾“å‡º: true
print(fruits.contains('grape'));   // è¾“å‡º: false

// æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„å…ƒç´ 
var longFruit = fruits.firstWhere((f) => f.length > 5);
print(longFruit);  // è¾“å‡º: banana
```

4ï¼‰**é«˜é˜¶å‡½æ•°æ–¹æ³•**

`Set` åŒæ ·æ”¯æŒ `forEach()`ã€`map()`ã€`where()`ã€`any()`ã€`every()` ç­‰é«˜é˜¶å‡½æ•°æ–¹æ³•ï¼Œç”¨æ³•ä¸ `List` ç›¸åŒã€‚

```dart
Set<int> numbers = {1, 2, 3, 4, 5};

numbers.forEach((n) => print(n * 2));

var evens = numbers.where((n) => n.isEven);
print(evens.toSet());  // è¾“å‡º: {2, 4}
```

**Flutter æ¡†æ¶å°çŸ¥è¯†**

ä½•æ—¶ä½¿ç”¨ Set è€Œé List

åœ¨ Flutter å¼€å‘ä¸­ï¼Œå½“éœ€è¦ç¡®ä¿å…ƒç´ å”¯ä¸€æ€§æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ `Set` è€Œä¸æ˜¯ `List`ã€‚ä¾‹å¦‚ï¼š

1. å­˜å‚¨ç”¨æˆ·é€‰æ‹©çš„æ ‡ç­¾ï¼Œé¿å…é‡å¤é€‰æ‹©
2. è®°å½•å·²è®¿é—®çš„é¡µé¢ï¼Œé˜²æ­¢é‡å¤è®°å½•
3. å»é‡æ“ä½œï¼Œå¦‚ä»ç½‘ç»œè·å–çš„æ•°æ®å»é‡

```dart
// ç”¨æˆ·é€‰æ‹©å…´è¶£æ ‡ç­¾
Set<String> selectedTags = {'Flutter', 'Dart'};
selectedTags.add('Flutter');  // ä¸ä¼šé‡å¤æ·»åŠ 
print(selectedTags);  // è¾“å‡º: {Flutter, Dart}
```

### 2.3 Mapï¼ˆæ˜ å°„ï¼‰

`Map` æ˜¯ Dart ä¸­ç”¨äºå­˜å‚¨é”®å€¼å¯¹ï¼ˆkey-valueï¼‰çš„æ•°æ®ç±»å‹ã€‚æ¯ä¸ªé”®ï¼ˆkeyï¼‰åœ¨ `Map` ä¸­æ˜¯å”¯ä¸€çš„ï¼Œè€Œå€¼ï¼ˆvalueï¼‰å¯ä»¥é‡å¤ã€‚`Map` éå¸¸é€‚åˆè¡¨ç¤ºå…·æœ‰å…³è”å…³ç³»çš„æ•°æ®ã€‚

#### 2.3.1 åˆ›å»ºæ˜ å°„

```dart
// ä½¿ç”¨å­—é¢é‡åˆ›å»º
Map<String, int> ages = {
  'Alice': 25,
  'Bob': 30,
  'Charlie': 35,
};

// ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»º
Map<String, String> capitals = Map<String, String>();

// åˆ›å»ºç©ºæ˜ å°„
Map<String, dynamic> empty = {};

// åˆ›å»ºä¸å¯å˜æ˜ å°„
const Map<String, int> immutable = {'a': 1, 'b': 2};
```

#### 2.3.2 å¸¸ç”¨å±æ€§

1ï¼‰**length**

è¿”å›é”®å€¼å¯¹çš„æ•°é‡ã€‚

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85};
print(scores.length);  // è¾“å‡º: 2
```

2ï¼‰**isEmpty å’Œ isNotEmpty**

æ£€æŸ¥æ˜ å°„æ˜¯å¦ä¸ºç©ºã€‚

```dart
Map<String, int> map1 = {};
Map<String, int> map2 = {'a': 1};

print(map1.isEmpty);      // è¾“å‡º: true
print(map2.isNotEmpty);   // è¾“å‡º: true
```

3ï¼‰**keys**

è¿”å›æ‰€æœ‰é”®çš„ Iterableã€‚

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85, 'Charlie': 92};
print(scores.keys);        // è¾“å‡º: (Alice, Bob, Charlie)
print(scores.keys.toList());  // è¾“å‡º: [Alice, Bob, Charlie]
```

4ï¼‰**values**

è¿”å›æ‰€æœ‰å€¼çš„ Iterableã€‚

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85, 'Charlie': 92};
print(scores.values);        // è¾“å‡º: (90, 85, 92)
print(scores.values.toList());  // è¾“å‡º: [90, 85, 92]
```

5ï¼‰**entries**

è¿”å›æ‰€æœ‰é”®å€¼å¯¹çš„ Iterableï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ `MapEntry` å¯¹è±¡ã€‚

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85};
for (var entry in scores.entries) {
  print('${entry.key}: ${entry.value}');
}
// è¾“å‡º:
// Alice: 90
// Bob: 85
```

#### 2.3.3 å¸¸ç”¨æ–¹æ³•

1ï¼‰**è®¿é—®å’Œä¿®æ”¹å…ƒç´ **

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85};

// è®¿é—®å…ƒç´ 
print(scores['Alice']);  // è¾“å‡º: 90
print(scores['Charlie']);  // è¾“å‡º: null (é”®ä¸å­˜åœ¨)

// ä¿®æ”¹å…ƒç´ 
scores['Alice'] = 95;
print(scores);  // è¾“å‡º: {Alice: 95, Bob: 85}

// æ·»åŠ æ–°å…ƒç´ 
scores['Charlie'] = 88;
print(scores);  // è¾“å‡º: {Alice: 95, Bob: 85, Charlie: 88}
```

2ï¼‰**putIfAbsent()**

å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ é”®å€¼å¯¹å¹¶è¿”å›å€¼ï¼›å¦‚æœé”®å·²å­˜åœ¨ï¼Œåˆ™è¿”å›ç°æœ‰å€¼ã€‚

```dart
Map<String, int> scores = {'Alice': 90};

var aliceScore = scores.putIfAbsent('Alice', () => 100);
print(aliceScore);  // è¾“å‡º: 90 (é”®å·²å­˜åœ¨ï¼Œè¿”å›åŸå€¼)

var bobScore = scores.putIfAbsent('Bob', () => 85);
print(bobScore);    // è¾“å‡º: 85 (é”®ä¸å­˜åœ¨ï¼Œæ·»åŠ å¹¶è¿”å›æ–°å€¼)
print(scores);      // è¾“å‡º: {Alice: 90, Bob: 85}
```

3ï¼‰**containsKey() å’Œ containsValue()**

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85};

print(scores.containsKey('Alice'));    // è¾“å‡º: true
print(scores.containsKey('Charlie'));  // è¾“å‡º: false
print(scores.containsValue(90));       // è¾“å‡º: true
print(scores.containsValue(100));      // è¾“å‡º: false
```

4ï¼‰**remove() å’Œ removeWhere()**

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85, 'Charlie': 92};

scores.remove('Bob');
print(scores);  // è¾“å‡º: {Alice: 90, Charlie: 92}

scores.removeWhere((key, value) => value < 92);
print(scores);  // è¾“å‡º: {Charlie: 92}
```

5ï¼‰**update() å’Œ updateAll()**

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85};

// æ›´æ–°æŒ‡å®šé”®çš„å€¼
scores.update('Alice', (value) => value + 5);
print(scores);  // è¾“å‡º: {Alice: 95, Bob: 85}

// é”®ä¸å­˜åœ¨æ—¶å¯æŒ‡å®šé»˜è®¤å€¼
scores.update('Charlie', (value) => value + 5, ifAbsent: () => 80);
print(scores);  // è¾“å‡º: {Alice: 95, Bob: 85, Charlie: 80}

// æ›´æ–°æ‰€æœ‰å€¼
scores.updateAll((key, value) => value + 10);
print(scores);  // è¾“å‡º: {Alice: 105, Bob: 95, Charlie: 90}
```

6ï¼‰**addAll() å’Œ addEntries()**

```dart
Map<String, int> scores = {'Alice': 90};

// æ·»åŠ å¤šä¸ªé”®å€¼å¯¹
scores.addAll({'Bob': 85, 'Charlie': 92});
print(scores);  // è¾“å‡º: {Alice: 90, Bob: 85, Charlie: 92}

// ä»å¦ä¸€ä¸ªæ˜ å°„æ·»åŠ 
Map<String, int> moreScores = {'David': 88};
scores.addEntries(moreScores.entries);
print(scores);  // è¾“å‡º: {Alice: 90, Bob: 85, Charlie: 92, David: 88}
```

7ï¼‰**clear()**

æ¸…ç©ºæ˜ å°„ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ã€‚

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85};
scores.clear();
print(scores);  // è¾“å‡º: {}
```

8ï¼‰**map()**

å°†æ˜ å°„ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹è½¬æ¢ä¸ºæ–°çš„é”®å€¼å¯¹ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ `Map`ã€‚

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85};

var gradeMap = scores.map((key, value) {
  String grade = value >= 90 ? 'A' : 'B';
  return MapEntry(key, grade);
});
print(gradeMap);  // è¾“å‡º: {Alice: A, Bob: B}
```

9ï¼‰**forEach()**

éå†æ˜ å°„ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹ã€‚

```dart
Map<String, int> scores = {'Alice': 90, 'Bob': 85};

scores.forEach((name, score) {
  print('$name scored $score');
});
// è¾“å‡º:
// Alice scored 90
// Bob scored 85
```

#### 2.3.4 åˆ—è¡¨ä¸æ˜ å°„çš„è½¬æ¢

```dart
// åˆ—è¡¨è½¬æ˜ å°„ (ä½¿ç”¨ç´¢å¼•ä½œä¸ºé”®)
List<String> fruits = ['apple', 'banana', 'orange'];
Map<int, String> fruitMap = fruits.asMap();
print(fruitMap);  // è¾“å‡º: {0: apple, 1: banana, 2: orange}

// ä»é”®åˆ—è¡¨å’Œå€¼åˆ—è¡¨åˆ›å»ºæ˜ å°„
List<String> keys = ['Alice', 'Bob', 'Charlie'];
List<int> values = [90, 85, 92];

Map<String, int> scores = Map.fromIterables(keys, values);
print(scores);  // è¾“å‡º: {Alice: 90, Bob: 85, Charlie: 92}
```

## ç¬¬3ç«  ç‰¹æ®Šç±»å‹

é™¤äº†åŸºæœ¬æ•°æ®ç±»å‹å’Œé›†åˆç±»å‹ï¼ŒDart è¿˜æä¾›äº†ä¸€äº›ç‰¹æ®Šç±»å‹ï¼Œç”¨äºå¤„ç†æ›´çµæ´»çš„ç¼–ç¨‹åœºæ™¯ã€‚

### 3.1 dynamic ç±»å‹

`dynamic` æ˜¯ Dart ä¸­çš„åŠ¨æ€ç±»å‹ï¼Œè¡¨ç¤ºè¯¥å˜é‡å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å€¼ï¼Œå¹¶ä¸”ç±»å‹æ£€æŸ¥åœ¨è¿è¡Œæ—¶æ‰è¿›è¡Œã€‚

#### 3.1.1 åŸºæœ¬ç”¨æ³•

```dart
dynamic variable = 'Hello';
print(variable);  // è¾“å‡º: Hello

variable = 42;
print(variable);  // è¾“å‡º: 42

variable = [1, 2, 3];
print(variable);  // è¾“å‡º: [1, 2, 3]
```

#### 3.1.2 dynamic ä¸ Object çš„åŒºåˆ«

`dynamic` å’Œ `Object` éƒ½å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹ï¼Œä½†å®ƒä»¬æœ‰é‡è¦åŒºåˆ«ï¼š

```dart
// dynamic ç±»å‹åœ¨ç¼–è¯‘æ—¶ä¸è¿›è¡Œç±»å‹æ£€æŸ¥
dynamic d = 'Hello';
d.nonExistentMethod();  // ç¼–è¯‘é€šè¿‡ï¼Œè¿è¡Œæ—¶å¯èƒ½æŠ¥é”™

// Object ç±»å‹åœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥
Object o = 'Hello';
// o.nonExistentMethod();  // ç¼–è¯‘é”™è¯¯: Object ç±»æ²¡æœ‰æ­¤æ–¹æ³•

// éœ€è¦å¯¹ Object è¿›è¡Œç±»å‹è½¬æ¢åæ‰èƒ½è°ƒç”¨ç‰¹å®šæ–¹æ³•
if (o is String) {
  print(o.length);  // ç±»å‹æ£€æŸ¥åå¯ä»¥ç›´æ¥ä½¿ç”¨
}
```

**Dart Tips è¯­æ³•å°è´´å£«**

è°¨æ…ä½¿ç”¨ dynamic ç±»å‹

è™½ç„¶ `dynamic` ç±»å‹æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œä½†è¿‡åº¦ä½¿ç”¨ä¼šå¤±å» Dart ç±»å‹å®‰å…¨çš„å¥½å¤„ã€‚å»ºè®®åœ¨ä»¥ä¸‹åœºæ™¯ä½¿ç”¨ï¼š

1. ä¸åŠ¨æ€ç±»å‹è¯­è¨€ï¼ˆå¦‚ JavaScriptï¼‰äº¤äº’æ—¶
2. å¤„ç† JSON æ•°æ®ç­‰åŠ¨æ€ç»“æ„æ—¶
3. éœ€è¦å®ç°æŸäº›åŠ¨æ€è¡Œä¸ºçš„ç‰¹å®šåœºæ™¯

åœ¨ Flutter å¼€å‘ä¸­ï¼Œæ¨èä½¿ç”¨å…·ä½“çš„ç±»å‹æˆ–æ³›å‹ï¼Œä»¥è·å¾—æ›´å¥½çš„ IDE æ”¯æŒå’Œç¼–è¯‘æ—¶æ£€æŸ¥ã€‚

### 3.2 var å…³é”®å­—

`var` å…³é”®å­—ç”¨äºå£°æ˜å˜é‡ï¼ŒDart ä¼šæ ¹æ®åˆå§‹å€¼è‡ªåŠ¨æ¨æ–­å˜é‡çš„ç±»å‹ã€‚

```dart
var name = 'Alice';  // æ¨æ–­ä¸º String
var age = 25;        // æ¨æ–­ä¸º int
var scores = [90, 85, 92];  // æ¨æ–­ä¸º List<int>

// ä¸€æ—¦ç±»å‹ç¡®å®šï¼Œå°±ä¸èƒ½æ”¹å˜
// name = 42;  // é”™è¯¯: ä¸èƒ½å°† int èµ‹å€¼ç»™ String
```

å¦‚æœæ²¡æœ‰åˆå§‹å€¼ï¼Œ`var` å£°æ˜çš„å˜é‡ç±»å‹ä¸º `dynamic`ï¼š

```dart
var anything;  // ç±»å‹ä¸º dynamic
anything = 'Hello';
anything = 42;
```

### 3.3 final å’Œ const

`final` å’Œ `const` éƒ½ç”¨äºå£°æ˜ä¸å¯å˜çš„å˜é‡ï¼Œä½†å®ƒä»¬æœ‰é‡è¦åŒºåˆ«ã€‚

#### 3.3.1 final

`final` å˜é‡åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ï¼Œèµ‹å€¼åä¸èƒ½ä¿®æ”¹ã€‚`final` å˜é‡çš„å€¼åœ¨è¿è¡Œæ—¶ç¡®å®šã€‚

```dart
final String name = 'Alice';
// name = 'Bob';  // é”™è¯¯: ä¸èƒ½ä¿®æ”¹ final å˜é‡

// å¯ä»¥å»¶è¿Ÿåˆå§‹åŒ–
final String greeting;
if (DateTime.now().hour < 12) {
  greeting = 'Good morning';
} else {
  greeting = 'Good afternoon';
}
// greeting = 'Good evening';  // é”™è¯¯: å·²ç»èµ‹å€¼è¿‡äº†
```

#### 3.3.2 const

`const` å˜é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå…¶å€¼å¿…é¡»åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šã€‚

```dart
const double pi = 3.14159;
const String appName = 'My App';

// é”™è¯¯: DateTime.now() æ˜¯è¿è¡Œæ—¶å€¼
// const String now = DateTime.now().toString();
```

#### 3.3.3 final ä¸ const çš„åŒºåˆ«

```dart
// final å˜é‡çš„å€¼åœ¨è¿è¡Œæ—¶ç¡®å®š
final List<int> finalList = [1, 2, 3];
finalList[0] = 10;  // å¯ä»¥ä¿®æ”¹åˆ—è¡¨å†…å®¹
// finalList = [4, 5, 6];  // é”™è¯¯: ä¸èƒ½é‡æ–°èµ‹å€¼

// const å˜é‡çš„å€¼åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œä¸”å®Œå…¨ä¸å¯å˜
const List<int> constList = [1, 2, 3];
// constList[0] = 10;  // é”™è¯¯: ä¸èƒ½ä¿®æ”¹ const åˆ—è¡¨

// const å¯ä»¥ç”¨äºåˆ›å»ºå¸¸é‡æ„é€ å‡½æ•°çš„å¯¹è±¡
const point = Point(1, 2);
```

**Flutter æ¡†æ¶å°çŸ¥è¯†**

const æ„é€ å‡½æ•°åœ¨ Flutter ä¸­çš„ä¼˜åŠ¿

åœ¨ Flutter ä¸­ï¼Œä½¿ç”¨ `const` æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œä»è€Œæé«˜æ€§èƒ½ï¼š

```dart
// æ¯æ¬¡é‡å»ºéƒ½ä¼šåˆ›å»ºæ–°å¯¹è±¡
Widget build(BuildContext context) {
  return Container(
    padding: EdgeInsets.all(16.0),  // é constï¼Œæ¯æ¬¡é‡å»ºéƒ½åˆ›å»ºæ–°å¯¹è±¡
    child: Text('Hello'),
  );
}

// ä½¿ç”¨ const æ„é€ å‡½æ•°ï¼Œå¯¹è±¡åœ¨ç¼–è¯‘æ—¶åˆ›å»ºï¼Œå¤ç”¨åŒä¸€ä¸ªå®ä¾‹
Widget build(BuildContext context) {
  return Container(
    padding: const EdgeInsets.all(16.0),  // const å¯¹è±¡
    child: const Text('Hello'),
  );
}
```

ä½¿ç”¨ `const` å¯ä»¥å‡å°‘å†…å­˜åˆ†é…ï¼Œæé«˜åº”ç”¨æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨åˆ—è¡¨ç­‰åœºæ™¯ä¸­æ•ˆæœæ›´æ˜æ˜¾ã€‚

### 3.4 Null å’Œå¯ç©ºç±»å‹

Dart 2.12 å¼•å…¥äº†ç©ºå®‰å…¨ï¼ˆNull Safetyï¼‰ç‰¹æ€§ï¼Œè¿™æ˜¯ Dart è¯­è¨€çš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ã€‚

#### 3.4.1 å¯ç©ºç±»å‹

åœ¨ç©ºå®‰å…¨æ¨¡å¼ä¸‹ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰ç±»å‹éƒ½æ˜¯éç©ºçš„ã€‚å¦‚æœå˜é‡å¯èƒ½ä¸º `null`ï¼Œéœ€è¦åœ¨ç±»å‹ååŠ  `?` æ ‡è®°ä¸ºå¯ç©ºç±»å‹ã€‚

```dart
// éç©ºç±»å‹ï¼Œä¸èƒ½ä¸º null
String name = 'Alice';
// name = null;  // é”™è¯¯: éç©ºç±»å‹ä¸èƒ½èµ‹ null

// å¯ç©ºç±»å‹ï¼Œå¯ä»¥ä¸º null
String? nullableName = 'Alice';
nullableName = null;  // åˆæ³•
```

#### 3.4.2 ç©ºæ–­è¨€è¿ç®—ç¬¦ï¼ˆ!ï¼‰

å½“ä½ ç¡®å®šä¸€ä¸ªå¯ç©ºç±»å‹çš„å˜é‡ä¸ä¸º `null` æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `!` è¿ç®—ç¬¦å°†å…¶è½¬æ¢ä¸ºéç©ºç±»å‹ã€‚

```dart
String? name = getName();
// print(name.length);  // é”™è¯¯: å¯ç©ºç±»å‹ä¸èƒ½ç›´æ¥è®¿é—®å±æ€§
print(name!.length);  // æ–­è¨€ name ä¸ä¸º null
```

#### 3.4.3 ç©ºåˆå¹¶è¿ç®—ç¬¦ï¼ˆ??ï¼‰

å¦‚æœå·¦ä¾§å€¼ä¸º `null`ï¼Œåˆ™ä½¿ç”¨å³ä¾§çš„é»˜è®¤å€¼ã€‚

```dart
String? name;
String displayName = name ?? 'Unknown';
print(displayName);  // è¾“å‡º: Unknown

// ä¸èµ‹å€¼ç»“åˆä½¿ç”¨
name ??= 'Guest';  // å¦‚æœ name ä¸º nullï¼Œåˆ™èµ‹å€¼ä¸º 'Guest'
```

#### 3.4.4 æ¡ä»¶è®¿é—®è¿ç®—ç¬¦ï¼ˆ?.ï¼‰

å½“è®¿é—®å¯ç©ºç±»å‹çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå¦‚æœå¯¹è±¡ä¸º `null`ï¼Œåˆ™è¿”å› `null` è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚

```dart
String? name;
print(name?.length);  // è¾“å‡º: null (ä¸ä¼šæŠ¥é”™)

name = 'Alice';
print(name?.length);  // è¾“å‡º: 5
```

#### 3.4.5 å¯ç©ºç±»å‹çš„çº§è”è¿ç®—

```dart
class Person {
  String? name;
  int? age;
}

Person? person;
// ä½¿ç”¨ ?.. è¿›è¡Œå¯ç©ºçº§è”è¿ç®—
person?..name = 'Alice'..age = 25;
```

## ç¬¬4ç«  ç±»å‹åˆ¤æ–­ä¸è½¬æ¢

åœ¨å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦åˆ¤æ–­å˜é‡çš„ç±»å‹æˆ–è¿›è¡Œç±»å‹è½¬æ¢ã€‚Dart æä¾›äº†ä¸°å¯Œçš„ç±»å‹æ“ä½œæ”¯æŒã€‚

### 4.1 ç±»å‹åˆ¤æ–­

#### 4.1.1 is è¿ç®—ç¬¦

`is` è¿ç®—ç¬¦ç”¨äºæ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹æˆ–å…¶å­ç±»å‹ã€‚

```dart
var name = 'Alice';
print(name is String);  // è¾“å‡º: true
print(name is int);     // è¾“å‡º: false

var numbers = [1, 2, 3];
print(numbers is List);      // è¾“å‡º: true
print(numbers is List<int>); // è¾“å‡º: true
```

#### 4.1.2 is! è¿ç®—ç¬¦

`is!` è¿ç®—ç¬¦æ˜¯ `is` çš„å¦å®šå½¢å¼ï¼Œç”¨äºæ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸æ˜¯æŒ‡å®šç±»å‹ã€‚

```dart
var value = 42;
print(value is! String);  // è¾“å‡º: true
print(value is! int);     // è¾“å‡º: false
```

### 4.2 ç±»å‹è½¬æ¢

#### 4.2.1 as è¿ç®—ç¬¦

`as` è¿ç®—ç¬¦ç”¨äºå°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºæŒ‡å®šç±»å‹ã€‚å¦‚æœè½¬æ¢å¤±è´¥ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚

```dart
Object obj = 'Hello';
String str = obj as String;
print(str.length);  // è¾“å‡º: 5

// é”™è¯¯çš„è½¬æ¢
// int number = obj as int;  // è¿è¡Œæ—¶é”™è¯¯: ç±»å‹è½¬æ¢å¤±è´¥
```

#### 4.2.2 æ•°å­—ç±»å‹è½¬æ¢

```dart
// int è½¬ double
int count = 42;
double d = count.toDouble();
print(d);  // è¾“å‡º: 42.0

// double è½¬ int
double price = 19.99;
int i = price.toInt();  // æˆªæ–­å°æ•°éƒ¨åˆ†
print(i);  // è¾“å‡º: 19

// å››èˆäº”å…¥
double value = 3.7;
int rounded = value.round();
print(rounded);  // è¾“å‡º: 4
```

#### 4.2.3 å­—ç¬¦ä¸²ä¸æ•°å­—è½¬æ¢

```dart
// String è½¬ int/int?
int number = int.parse('42');
int? nullableNumber = int.tryParse('abc');  // è¾“å‡º: null

// String è½¬ double
double pi = double.parse('3.14159');
double? nullableDouble = double.tryParse('not a number');  // è¾“å‡º: null

// æ•°å­—è½¬ String
String str1 = 42.toString();
String str2 = 3.14159.toStringAsFixed(2);  // è¾“å‡º: "3.14"
```

#### 4.2.4 é›†åˆç±»å‹è½¬æ¢

```dart
// List è½¬ Set (å»é‡)
List<int> numbers = [1, 2, 2, 3, 3, 3];
Set<int> unique = numbers.toSet();
print(unique);  // è¾“å‡º: {1, 2, 3}

// Set è½¬ List
Set<String> fruits = {'apple', 'banana'};
List<String> fruitList = fruits.toList();
print(fruitList);  // è¾“å‡º: [apple, banana]

// Map çš„ keys å’Œ values è½¬ List
Map<String, int> scores = {'Alice': 90, 'Bob': 85};
List<String> names = scores.keys.toList();
List<int> values = scores.values.toList();
```

## ç¬¬5ç«  å®æˆ˜åº”ç”¨ç¤ºä¾‹

æœ¬ç« å°†é€šè¿‡å®é™…æ¡ˆä¾‹å±•ç¤º Dart æ•°æ®ç±»å‹åœ¨ Flutter å¼€å‘ä¸­çš„åº”ç”¨ã€‚

### 5.1 æ•°æ®å¤„ç†ç¤ºä¾‹

```dart
// å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿ
class StudentGrade {
  final String name;
  final Map<String, int> scores;

  StudentGrade(this.name, this.scores);

  // è®¡ç®—å¹³å‡åˆ†
  double get average {
    if (scores.isEmpty) return 0.0;
    var total = scores.values.reduce((a, b) => a + b);
    return total / scores.length;
  }

  // è·å–æœ€é«˜åˆ†ç§‘ç›®
  String? get highestSubject {
    if (scores.isEmpty) return null;
    return scores.entries
      .reduce((a, b) => a.value > b.value ? a : b)
      .key;
  }

  // åˆ¤æ–­æ˜¯å¦åŠæ ¼ï¼ˆæ‰€æœ‰ç§‘ç›® >= 60ï¼‰
  bool get isPassing {
    return scores.values.every((score) => score >= 60);
  }
}

void main() {
  var student = StudentGrade('Alice', {
    'Math': 85,
    'English': 92,
    'Science': 78,
  });

  print('${student.name} çš„å¹³å‡åˆ†: ${student.average.toStringAsFixed(1)}');
  print('æœ€é«˜åˆ†ç§‘ç›®: ${student.highestSubject}');
  print('æ˜¯å¦å…¨éƒ¨åŠæ ¼: ${student.isPassing}');
}
```

### 5.2 JSON æ•°æ®å¤„ç†

```dart
import 'dart:convert';

// è§£æ JSON æ•°æ®
void parseJson(String jsonString) {
  // è§£æä¸º Map
  Map<String, dynamic> data = jsonDecode(jsonString);

  String name = data['name'] as String;
  int age = data['age'] as int;
  List<dynamic> hobbies = data['hobbies'] as List<dynamic>;

  print('Name: $name');
  print('Age: $age');
  print('Hobbies: ${hobbies.join(', ')}');
}

// æ„å»º JSON æ•°æ®
String buildJson() {
  Map<String, dynamic> data = {
    'name': 'Alice',
    'age': 25,
    'hobbies': ['reading', 'coding', 'traveling'],
    'address': {
      'city': 'Beijing',
      'zipCode': '100000',
    },
  };

  return jsonEncode(data);
}
```

### 5.3 Flutter ç•Œé¢æ•°æ®ç»‘å®š

```dart
class UserProfile extends StatelessWidget {
  final Map<String, dynamic> userData = {
    'name': 'Alice',
    'age': 25,
    'email': 'alice@example.com',
    'isActive': true,
    'tags': ['Flutter', 'Dart', 'Mobile'],
  };

  @override
  Widget build(BuildContext context) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text('Name: ${userData['name']}'),
        Text('Age: ${userData['age']}'),
        Text('Email: ${userData['email']}'),

        // æ¡ä»¶æ˜¾ç¤º
        if (userData['isActive'] as bool)
          const Text('Status: Active', style: TextStyle(color: Colors.green)),

        // æ ‡ç­¾åˆ—è¡¨
        Wrap(
          spacing: 8.0,
          children: (userData['tags'] as List<String>)
            .map((tag) => Chip(label: Text(tag)))
            .toList(),
        ),
      ],
    );
  }
}
```

## é™„å½•ï¼šæ•°æ®ç±»å‹é€ŸæŸ¥è¡¨

| ç±»å‹        | æè¿°                      | ç¤ºä¾‹                               |
| ----------- | ------------------------- | ---------------------------------- |
| `int`       | æ•´æ•°                      | `int age = 25;`                    |
| `double`    | æµ®ç‚¹æ•°                    | `double pi = 3.14;`                |
| `num`       | æ•°å­—ï¼ˆint/double çš„çˆ¶ç±»ï¼‰ | `num value = 10;`                  |
| `String`    | å­—ç¬¦ä¸²                    | `String name = 'Alice';`           |
| `bool`      | å¸ƒå°”å€¼                    | `bool isActive = true;`            |
| `List<T>`   | æœ‰åºåˆ—è¡¨                  | `List<int> nums = [1, 2, 3];`      |
| `Set<T>`    | æ— åºé›†åˆï¼ˆå…ƒç´ å”¯ä¸€ï¼‰      | `Set<String> set = {'a', 'b'};`    |
| `Map<K, V>` | é”®å€¼å¯¹æ˜ å°„                | `Map<String, int> map = {'a': 1};` |
| `dynamic`   | åŠ¨æ€ç±»å‹                  | `dynamic anything = 'test';`       |
| `Object`    | æ‰€æœ‰ç±»å‹çš„çˆ¶ç±»            | `Object obj = 'test';`             |
| `var`       | ç±»å‹æ¨æ–­                  | `var name = 'Alice';`              |
| `final`     | è¿è¡Œæ—¶å¸¸é‡                | `final name = 'Alice';`            |
| `const`     | ç¼–è¯‘æ—¶å¸¸é‡                | `const pi = 3.14;`                 |
| `T?`        | å¯ç©ºç±»å‹                  | `String? name;`                    |

---

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº† Dart è¯­è¨€çš„å„ç§æ•°æ®ç±»å‹åŠå…¶å±æ€§å’Œæ–¹æ³•ï¼Œé…åˆå¤§é‡ç¤ºä¾‹ä»£ç ï¼Œå¸®åŠ©è¯»è€…å…¨é¢æŒæ¡ Dart çš„ç±»å‹ç³»ç»Ÿã€‚åœ¨å®é™… Flutter å¼€å‘ä¸­ï¼Œåˆç†é€‰æ‹©å’Œä½¿ç”¨æ•°æ®ç±»å‹æ˜¯ç¼–å†™é«˜è´¨é‡ä»£ç çš„åŸºç¡€ï¼Œå»ºè®®è¯»è€…é€šè¿‡å®é™…é¡¹ç›®ä¸æ–­ç»ƒä¹ å’Œæ·±åŒ–ç†è§£ã€‚
